<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IT Service Catalog</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .modal-backdrop {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 40;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 50;
            opacity: 0;
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        }
        .modal.active {
            display: flex;
        }
        .modal-backdrop.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="app" class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        
        <!-- Header -->
        <header class="mb-8">
            <div class="flex items-center justify-between">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">IT Service Catalog</h1>
                    <p class="mt-1 text-lg text-gray-600">How can we help you today?</p>
                </div>
                 <div class="p-3 bg-blue-600 rounded-full text-white">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-life-buoy"><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="4"/><line x1="4.93" x2="9.17" y1="4.93" y2="9.17"/><line x1="14.83" x2="19.07" y1="9.17" y2="4.93"/><line x1="14.83" x2="19.07" y1="14.83" y2="19.07"/><line x1="4.93" x2="9.17" y1="19.07" y2="14.83"/></svg>
                </div>
            </div>
             <!-- Search Bar -->
            <div class="mt-6 relative">
                <input type="text" id="searchInput" placeholder="Search for a service (e.g., 'password', 'new user', 'printer')..."
                    class="w-full p-4 pl-12 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-shadow">
                <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                     <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search text-gray-400"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                </div>
            </div>
        </header>

        <main id="mainContent">
            <!-- Breadcrumbs will be inserted here -->
            <div id="breadcrumb" class="mb-6"></div>
            
            <!-- Dynamic Content (Categories/Services) -->
            <div id="catalogGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                <!-- Cards will be injected here by JavaScript -->
            </div>
             <!-- No results message -->
            <div id="noResults" class="hidden text-center py-16">
                <svg xmlns="http://www.w3.org/2000/svg" width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search-x mx-auto text-gray-400"><path d="m13.5 8.5-5 5"/><path d="m8.5 8.5 5 5"/><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>
                <h3 class="mt-4 text-xl font-semibold text-gray-800">No Services Found</h3>
                <p class="mt-1 text-gray-500">We couldn't find any services matching your search. Try using different keywords.</p>
            </div>
        </main>
    </div>

    <!-- Modal for Service Details -->
    <div id="modalBackdrop" class="modal-backdrop"></div>
    <div id="serviceModal" class="modal w-11/12 max-w-2xl bg-white rounded-2xl shadow-2xl flex-col" style="max-height: 85vh;">
        <div class="flex justify-between items-center p-6 border-b border-gray-200">
            <div>
                 <h2 id="modalTitle" class="text-2xl font-bold text-gray-900">Service Details</h2>
                 <p id="modalDescription" class="text-gray-600 mt-1"></p>
            </div>
            <button id="closeModal" class="p-2 rounded-full text-gray-500 hover:bg-gray-100 hover:text-gray-800 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
            </button>
        </div>
        <div id="modalBody" class="p-6 overflow-y-auto">
            <h3 class="text-lg font-semibold text-gray-800 mb-4">Request Form</h3>
            <div id="modalFormFields" class="space-y-4">
                <!-- Form fields will be injected here -->
            </div>
        </div>
        <div class="p-6 bg-gray-50 border-t border-gray-200 rounded-b-2xl">
            <button class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-all shadow-md">
                Submit Request
            </button>
             <p class="text-xs text-gray-500 mt-3 text-center">Note: This is a prototype. The submit button is not functional.</p>
        </div>
    </div>

    <script>
        // --- DATA ---
        // This data is synthesized from your cat_hd.csv and template.csv files.
        // It's structured into user-friendly categories with specific service offerings.
        const serviceCatalogData = [
            {
                name: "User & Account Management",
                icon: 'users',
                description: "Create new user accounts, manage access permissions, and reset passwords for various applications.",
                services: [
                    { id: "olibs_new_user", name: "OLIBS: Pendaftaran User Baru", description: "Request a new user account for the OLIBS application.", fields: [ { name: "Cabang/Capem", type: "Drop-down nama Cabang/Capem" }, { name: "Kode User", type: "Text" }, { name: "Nama User", type: "Text" }, { name: "Jabatan", type: "Text" } ]},
                    { id: "olibs_non_active", name: "OLIBS: Non Aktif User", description: "Deactivate an existing OLIBS user account.", fields: [ { name: "Cabang/Capem", type: "Drop-down nama Cabang/Capem" }, { name: "Kode User", type: "Text" }, { name: "Nama User", type: "Text" }, { name: "Jabatan", type: "Text" } ]},
                    { id: "olibs_password", name: "OLIBS: Override Password", description: "Request a password override for an OLIBS user.", fields: [ { name: "Cabang/Capem", type: "Drop-down nama Cabang/Capem" }, { name: "Kode User", type: "Text" }, { name: "Nama User", type: "Text" }, { name: "Jabatan", type: "Text" } ]},
                    { id: "olibs_change_limit", name: "OLIBS: Perubahan Menu & Limit Transaksi", description: "Modify menu access and transaction limits for an OLIBS user.", fields: [ { name: "Tanggal berlaku*", type: "Date" }, { name: "Cabang / Capem*", type: "Drop-Down “Nama Cabang”" }, { name: "Kode User*", type: "Short Text (maks 5 karakter)" }, { name: "Program Fasilitas OLIBS*", type: "Drop-Down “Menu OLIBs”" } ]},
                    { id: "olibs_transfer_user", name: "OLIBS: Mutasi User Pegawai", description: "Transfer a user between branches or departments.", fields: [ { name: "Tanggal berlaku*", type: "Date" }, { name: "Cabang / Capem*", type: "Drop-Down “Nama Cabang”" }, { name: "Kode User*", type: "Short Text (maks 5 karakter)" }, { name: "Mutasi dari", type: "Drop-Down “Nama Cabang”" }, { name: "Mutasi ke Kantor Kas", type: "Short Text" } ]},
                    { id: "xcard_new_user", name: "XCARD: Pendaftaran User Baru", description: "Request a new user account for the XCARD application.", fields: [ { name: "Cabang/Capem", type: "Drop-down nama Cabang/Capem" }, { name: "Kode User", type: "Text" }, { name: "Nama User", type: "Text" }, { name: "IP Komputer", type: "Varchar" }, { name: "Menu XCARD", type: "Text" } ]},
                    { id: "xcard_unlock", name: "XCARD: Buka Blokir dan Reset Password", description: "Unlock a blocked XCARD account or reset a user's password.", fields: [ { name: "Cabang/Capem", type: "Drop-down nama Cabang/Capem" }, { name: "Kode User", type: "Text" }, { name: "Nama User", type: "Text" }, { name: "Jabatan", type: "Text" } ]},
                    { id: "bsgqris_new_user", name: "BSG QRIS: Pendaftaran User", description: "Create a new user for the BSG QRIS system.", fields: [ { name: "Cabang/Capem", type: "Drop-down nama Cabang/Capem" }, { name: "Kode User", type: "Text" }, { name: "Nama User", type: "Text" } ]},
                    { id: "bsgqris_unlock", name: "BSG QRIS: Buka Blokir & Reset Password", description: "Unlock or reset a password for a BSG QRIS account.", fields: [ { name: "Cabang/Capem", type: "Drop-down nama Cabang/Capem" }, { name: "Kode User", type: "Text" }, { name: "Nama User", type: "Text" } ]},
                    { id: "sms_banking_new_user", name: "SMS Banking: Pendaftaran User", description: "Create a new user for the SMS Banking system.", fields: [ { name: "Cabang/Capem", type: "Drop-down nama Cabang/Capem" }, { name: "Kode User", type: "Text" }, { name: "Nama User", type: "Text" } ]},
                ]
            },
            {
                name: "Hardware & Software",
                icon: 'hard-drive',
                description: "Request new devices, software installations, or maintenance for your computer and peripherals.",
                services: [
                    { id: "hw_install_os", name: "Instalasi Sistem Operasi (Hardening)", description: "Request a fresh and secure installation of a Windows or Linux operating system.", fields: [] },
                    { id: "hw_install_sw", name: "Instalasi Perangkat Lunak", description: "Request the installation of approved software on your computer.", fields: [] },
                    { id: "hw_maintenance_pc", name: "Maintenance Komputer", description: "Schedule a routine check-up or repair for your desktop or laptop.", fields: [] },
                    { id: "hw_maintenance_printer", name: "Maintenance Printer", description: "Request maintenance or troubleshooting for a network or local printer.", fields: [] },
                    { id: "req_usb_access", name: "Permintaan Akses Flashdisk/Harddisk/SSD", description: "Request temporary access for a USB storage device.", fields: [] },
                ]
            },
            {
                name: "Network & Connectivity",
                icon: 'wifi',
                description: "Report network outages, slow performance, or issues with internet, LAN, or WAN connectivity.",
                services: [
                    { id: "net_lan_issue", name: "Gangguan Jaringan LAN", description: "Report a problem with the local area network (cabled connection).", fields: [] },
                    { id: "net_wan_issue", name: "Gangguan Jaringan WAN", description: "Report an issue connecting to other branches or remote systems.", fields: [] },
                    { id: "net_internet_issue", name: "Gangguan Jaringan Internet", description: "Report slow or no internet access.", fields: [] },
                    { id: "net_bi_extranet_issue", name: "Gangguan Ekstranet BI", description: "Report connectivity issues with the Bank Indonesia extranet.", fields: [] },
                ]
            },
            {
                name: "ATM Services",
                icon: 'credit-card',
                description: "Manage ATMs, including technical issues, transaction discrepancies, and profile changes.",
                services: [
                    { id: "atm_new", name: "Pendaftaran Terminal ATM Baru", description: "Register a new ATM terminal in the system.", fields: [] },
                    { id: "atm_dispute", name: "Penyelesaian Selisih ATM", description: "Report and resolve a cash discrepancy at an ATM.", fields: [] },
                    { id: "atm_technical", name: "Permasalahan Teknis ATM", description: "Report a technical fault or malfunction with an ATM.", fields: [ { name: "Cabang/Capem", type: "Drop-down nama Cabang/Capem" }, { name: "ID ATM", type: "Varchar" }, { name: "Nama ATM", type: "Text" }, { name: "Serial Number", type: "Varchar" }, { name: "Tipe Mesin", type: "Text" }, { name: "Nama PIC", type: "Text" }, { name: "No HP PIC", type: "Varchar" } ]},
                    { id: "atm_change_ip", name: "Perubahan IP ATM", description: "Request to change the IP address of an ATM terminal.", fields: [] },
                ]
            },
            {
                name: "Transaction Claims",
                icon: 'receipt',
                description: "Submit a claim for a failed or incorrect transaction via BSGTouch, QRIS, or other channels.",
                services: [
                    { id: "claim_bsgtouch_transfer", name: "Klaim: BSGTouch Transfer Antar Bank", description: "File a claim for a failed inter-bank transfer made via BSGTouch.", fields: [ { name: "Nama Nasabah*", type: "Short Text" }, { name: "Nomor Rekening*", type: "Number Only" }, { name: "Nominal Transaksi*", type: "Currency" }, { name: "Tanggal transaksi*", type: "Timestamp" }, { name: "Nomor Arsip*", type: "Short Text" } ] },
                    { id: "claim_bsgtouch_failed", name: "Klaim: BSGTouch/QRIS Gagal Transaksi", description: "General claim for any failed transaction on BSGTouch or QRIS.", fields: [ { name: "Cabang/Capem", type: "Drop-down nama Cabang/Capem" }, { name: "Nama Nasabah", type: "Text" }, { name: "Nomor Rekening", type: "Text" }, { name: "Nominal Transaksi", type: "Text" }, { name: "Tgl. Transaksi", type: "Date" }, { name: "Nomor Arsip", type: "Text" } ] },
                    { id: "claim_qris_bi_fast", name: "Klaim: BI-Fast", description: "File a claim specifically for a BI-Fast transaction.", fields: [] },
                    { id: "claim_qris_transaction", name: "Klaim: Transaksi QRIS", description: "File a claim related to a QRIS payment.", fields: [] },
                ]
            },
            {
                name: "General Requests & Reports",
                icon: 'file-text',
                description: "Request data, reports, or other general administrative and operational tasks.",
                services: [
                    { id: "req_data", name: "Permintaan Data", description: "Request for specific data logs or reports (e.g., RC Softcopy, ATM Logs).", fields: [] },
                    { id: "req_operational_extension", name: "Permintaan Perpanjangan Waktu Operasional", description: "Request to extend branch operational hours for a specific day.", fields: [{name: "Cabang/Capem", type: "Drop-down"}, {name: "Nomor Surat", type: "Text"}, {name: "Alasan", type: "Textarea"}, {name: "Estimasi Close Cabang", type: "Time"}] },
                    { id: "req_open_branch", name: "Buka Operasional Cabang", description: "Request to open branch operations outside of normal hours.", fields: [] },
                    { id: "req_change_pk", name: "Permintaan Perubahan Nomor PK Kredit", description: "Request a change to a credit agreement number.", fields: [] },
                ]
            },
             {
                name: "Report an Issue",
                icon: 'siren',
                description: "Experiencing an error or a system problem? Report it here for our team to investigate.",
                services: [
                    { id: "error_olibs", name: "Error: OLIBs", description: "Report an error in the OLIBs Core Banking System (e.g., Gagal Connect, Error PRK, Selisih Pembukuan).", fields: [] },
                    { id: "error_bsgtouch", name: "Error: BSGTouch", description: "Report an issue with the BSGTouch mobile application.", fields: [] },
                    { id: "error_switching", name: "Error: Switching", description: "Report issues related to inter-bank transactions, ATM transactions, or connectivity.", fields: [] },
                    { id: "error_kasda", name: "Error: Kasda", description: "Report a system error, data issue, or performance problem in the Kasda application.", fields: [] },
                    { id: "error_other", name: "Error: Aplikasi Lainnya", description: "Report an issue with any other application not listed.", fields: [] },
                ]
            },
        ];

        // --- DOM ELEMENTS ---
        const catalogGrid = document.getElementById('catalogGrid');
        const searchInput = document.getElementById('searchInput');
        const breadcrumb = document.getElementById('breadcrumb');
        const mainContentTitle = document.querySelector('#app h1');
        const noResults = document.getElementById('noResults');
        const modal = document.getElementById('serviceModal');
        const modalBackdrop = document.getElementById('modalBackdrop');
        const closeModalBtn = document.getElementById('closeModal');
        
        let currentView = 'categories';
        let currentCategory = null;

        // --- RENDER FUNCTIONS ---

        const createCard = (item, type) => {
            const card = document.createElement('div');
            card.className = 'bg-white p-6 rounded-2xl shadow-sm border border-gray-200 cursor-pointer transition-all duration-300 card-hover';
            card.style.opacity = '0';
            card.style.transform = 'translateY(20px)';

            const iconName = item.icon || (type === 'category' ? 'folder' : 'file-text');
            
            card.innerHTML = `
                <div class="flex items-center justify-center bg-blue-100 text-blue-600 rounded-xl w-14 h-14 mb-4">
                    <i data-lucide="${iconName}"></i>
                </div>
                <h3 class="text-lg font-bold text-gray-900">${item.name}</h3>
                <p class="text-sm text-gray-500 mt-1 h-10">${item.description || ''}</p>
            `;
            
            if (type === 'category') {
                card.onclick = () => renderServices(item);
            } else {
                card.onclick = () => showServiceModal(item);
            }

            // Staggered animation
            setTimeout(() => {
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
            }, 100 * (Math.random() * 2));


            return card;
        };

        const renderCategories = () => {
            catalogGrid.innerHTML = '';
            serviceCatalogData.forEach(category => {
                const card = createCard(category, 'category');
                catalogGrid.appendChild(card);
            });
            updateBreadcrumb();
            currentView = 'categories';
            lucide.createIcons();
        };

        const renderServices = (category) => {
            catalogGrid.innerHTML = '';
            category.services.forEach(service => {
                const card = createCard(service, 'service');
                catalogGrid.appendChild(card);
            });
            currentCategory = category;
            updateBreadcrumb();
            currentView = 'services';
            lucide.createIcons();
        };

        const filterAndRender = (term) => {
            catalogGrid.innerHTML = '';
            let resultsFound = false;
            const lowerCaseTerm = term.toLowerCase();

            serviceCatalogData.forEach(category => {
                category.services.forEach(service => {
                    if (service.name.toLowerCase().includes(lowerCaseTerm) || 
                        (service.description && service.description.toLowerCase().includes(lowerCaseTerm)) ||
                        category.name.toLowerCase().includes(lowerCaseTerm)) 
                    {
                        const card = createCard(service, 'service');
                        catalogGrid.appendChild(card);
                        resultsFound = true;
                    }
                });
            });
            
            noResults.style.display = resultsFound ? 'none' : 'block';
            catalogGrid.style.display = resultsFound ? 'grid' : 'none';
            updateBreadcrumb(null, `Search results for "${term}"`);
            lucide.createIcons();
        };
        
        // --- BREADCRUMB ---
        
        const updateBreadcrumb = (category = currentCategory, searchText = null) => {
            breadcrumb.innerHTML = '';
            
            const homeLink = document.createElement('a');
            homeLink.href = '#';
            homeLink.className = 'text-blue-600 hover:underline font-medium';
            homeLink.textContent = 'All Categories';
            homeLink.onclick = (e) => {
                e.preventDefault();
                searchInput.value = '';
                currentCategory = null;
                noResults.style.display = 'none';
                catalogGrid.style.display = 'grid';
                renderCategories();
            };
            breadcrumb.appendChild(homeLink);

            if (searchText) {
                 breadcrumb.innerHTML = ''; // Clear for search
                 const searchCrumb = document.createElement('span');
                 searchCrumb.className = 'text-gray-500';
                 searchCrumb.innerHTML = `<span class="mx-2 text-gray-400">/</span> ${searchText}`;
                 breadcrumb.appendChild(homeLink);
                 breadcrumb.appendChild(searchCrumb);
            } else if (category) {
                const categoryCrumb = document.createElement('span');
                categoryCrumb.className = 'text-gray-500';
                categoryCrumb.innerHTML = `<span class="mx-2 text-gray-400">/</span> ${category.name}`;
                breadcrumb.appendChild(categoryCrumb);
            }
        };

        // --- MODAL ---
        const showServiceModal = (service) => {
            document.getElementById('modalTitle').textContent = service.name;
            document.getElementById('modalDescription').textContent = service.description;
            
            const formFieldsContainer = document.getElementById('modalFormFields');
            formFieldsContainer.innerHTML = '';
            
            if (service.fields && service.fields.length > 0) {
                 service.fields.forEach(field => {
                    const fieldWrapper = document.createElement('div');
                    const label = document.createElement('label');
                    label.className = "block text-sm font-medium text-gray-700 mb-1";
                    label.textContent = field.name;

                    let input;
                    if(field.type.toLowerCase() === 'textarea') {
                        input = document.createElement('textarea');
                        input.rows = 3;
                    } else {
                        input = document.createElement('input');
                        input.type = 'text'; // Simplified for prototype
                    }
                    
                    input.placeholder = field.type;
                    input.className = "block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm";
                    
                    fieldWrapper.appendChild(label);
                    fieldWrapper.appendChild(input);
                    formFieldsContainer.appendChild(fieldWrapper);
                });
            } else {
                formFieldsContainer.innerHTML = '<p class="text-gray-500">No specific fields are required for this request. Please provide details in your ticket description upon submission.</p>';
            }

            modalBackdrop.classList.add('active');
            modal.classList.add('active');
            setTimeout(() => {
                modalBackdrop.style.opacity = '1';
                modal.style.opacity = '1';
                modal.style.transform = 'translate(-50%, -50%) scale(1)';
            }, 10);
        };

        const hideServiceModal = () => {
             modalBackdrop.style.opacity = '0';
             modal.style.opacity = '0';
             modal.style.transform = 'translate(-50%, -50%) scale(0.95)';
             setTimeout(() => {
                modalBackdrop.classList.remove('active');
                modal.classList.remove('active');
            }, 300);
        };

        // --- EVENT LISTENERS ---
        searchInput.addEventListener('input', (e) => {
            const term = e.target.value;
            if (term.length > 1) {
                filterAndRender(term);
            } else if (term.length === 0) {
                 noResults.style.display = 'none';
                 catalogGrid.style.display = 'grid';
                 renderCategories();
            }
        });
        
        closeModalBtn.onclick = hideServiceModal;
        modalBackdrop.onclick = hideServiceModal;

        // --- INITIAL RENDER ---
        document.addEventListener('DOMContentLoaded', () => {
            renderCategories();
        });

    </script>
</body>
</html>
